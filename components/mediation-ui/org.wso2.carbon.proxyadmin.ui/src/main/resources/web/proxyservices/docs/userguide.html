<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!--
 ~ Copyright (c) 2005-2010, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 ~
 ~ WSO2 Inc. licenses this file to you under the Apache License,
 ~ Version 2.0 (the "License"); you may not use this file except
 ~ in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~    http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing,
 ~ software distributed under the License is distributed on an
 ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 ~ KIND, either express or implied.  See the License for the
 ~ specific language governing permissions and limitations
 ~ under the License.
 -->
<html>

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
    <title>代理服务 - 使用指南</title>
    <link href="../../admin/css/documentation.css" rel="stylesheet" type="text/css" media="all" />
</head>

<body>
    <h1>代理服务</h1>

    <p>代理服务充当ESB中托管的服务，通常处于现有服务端点的前面。可以创建代理服务暴露在不同的传输，架构，WSDL或QoS（例如WS-Security，     WS-Reliable Messaging）除了真实服务之外。它可以在传递到实际端点前调解消息或在
            在返回客户端之前调制消息。
    </p>

    <p>客户端可以直接向ESB发送代理服务请求 。客户端将其视为托管在ESB上的服务。例如，它可以执行
        <code>?wsdl </code>函数并查看虚拟代理服务的WSDL。在ESB配置中，无论如何都可以处理此类请求。您可以处理消息并将其发送到实际服务，可能正在运行在另一台计算机上，但没有必要始终发送消息到实际的服务。您可以列出要执行的任务组合 收到的代理服务消息并终止流程或发送，即使不将其发送到实际服务，也会将消息发回客户端。
    </p>


    <h2>添加代理服务</h2>
    <p>
        从左侧导航菜单中，点击管理>服务>添加,选择
        <strong>代理服务</strong>。这将带您进入
        <strong>使用模板创建代理服务</strong>页面。
    </p>
    <div class="image">
        <img alt="add proxy image" src="images/templates.png" />

        <p>图 1: 选择代理服务模板</p>
    </div>
    <p>
        选择适合您的中介要求的模板。如果你在期望创建高级代理服务且没有可用的模板符合您的要求，请选择位于模板列表最后的
        <strong>
            <a href='custom-proxy.html'>自定义代理</a>
        </strong>选项。这将启动代理服务创建向导，使您可以自定义代理的所有方面服务包括序列，端点，传输设置，WSDL选项和其他QoS设置。
    </p>
    <p>
        <strong>基于模板模板创建代理服务</strong>页面为您提供了以下一组用于创建和设置代理服务的内置模板轻松快速。
    </p>
    <ul>
        <li>
            <a href="#passthroughproxy">穿透型代理</a>
        </li>
        <li>
            <a href="#secureproxy">安全代理</a>
        </li>
        <li>
            <a href="#wsdlbasedproxy">基于WSDL的代理</a>
        </li>
        <li>
            <a href="#logproxy">日志或转发代理</a>
        </li>
        <li>
            <a href="#transformerproxy">转换代理</a>
        </li>
        <li>
            <a href="custom-proxy.html">自定义代理</a>
        </li>
    </ul>

    <h3>
        <a name="passthroughproxy">穿透型代理</a>
    </h3>
    <p>
        此模板可用于在指定端点上创建简单代理服务。这里没有任何可用于定义序列的选项。</p>
    <p> 此代理服务不会对通过代理的邮件执行任何处理。</p>

    <div class="image">
        <img alt="穿透型代理" src="images/pass-through-proxy.jpeg" />

        <p>图 2: 穿透型代理模板</p>
    </div>

    <h4> 参数 </h4>
    <ul>
        <li>代理服务设置 : 用户应提供代理名称和端点URL。选择端点可以作为直接端点或注册表项。</li>
        <li>WSDL 选项 : 如果用户想要发布实际的后端服务WSDL/自定义WSDL，他可以提供WSDL条目注册表项或URL或内联wsdl选项。如果用户没有提供WSDL选项，则在用户请求?WSDL时将发布默认WSDL。 </li>
        <li>传输设置 : 可以在此处指定代理服务传输选项。</li>
    </ul>

    <p>
        <strong>注意: </strong>如果用户使用WSO2 Governance Registry配置WSO2 ESB，并且他将所有必需的文件上传为* .gar文件（在WSO2 GREG文档中描述），他只能在“WSDl选项”下提供基本WSDL。
        无需将所有必需的导入模式作为WSDL资源提供，因为ESB只能使用基本WSDL来解析导入的资源。请注意，对于上述功能，用户需要取消注释以下行@synapse.properties文件，该文件在ESB_HOME/lib/core/WEB_INF/classes文件夹中。
    </p>
    <p>
        <strong>
            synapse.wsdl.resolver=org.wso2.carbon.mediation.initializer.RegistryWSDLLocator
            <br/> synapse.schema.resolver=org.wso2.carbon.mediation.initializer.RegistryXmlSchemaURIResolver
        </strong>
    </p>

    <h3>
        <a name="secureproxy">安全代理</a>
    </h3>

    <p>
        此模板可用于创建使用WS-Security安全的代理。如果您希望使用WS-Security公开现有服务，则可以选择此选项。
    </p>

    <div class="image">
        <img alt="安全代理" src="images/secure-proxy.jpeg" />

        <p>图 3: 安全代理模板</p>
    </div>

    <h4> 参数 </h4>

    <p>
        除了“穿透型代理”配置参数外，用户还应提供安全策略参数。
    </p>
    <ul>
        <li>代理服务设置 : 用户应提供代理名称和端点URL。选择端点可以作为直接端点或注册表项。</li>
        <li>WSDL 选项 : 如果用户想要发布实际的后端服务WSDL/自定义WSDL，他可以提供WSDL条目注册表项或URL或内联wsdl选项。如果用户没有提供WSDL选项，则在用户请求?WSDL时将发布默认WSDL。 </li>
        <li>传输设置 : 可以在此处指定代理服务传输选项。</li>
    </ul>

    <p>
        <strong>注意: </strong>如果用户使用助力注册表配置ESB并且上传了全部服务的文件构成的*.gar 文件, 他只需要在“WSDl选项”下提供基本WSDL。无需将所有必需的导入模式作为WSDL资源提供，因为ESB只能使用基本WSDL来解析导入的资源。
        请注意，对于上述功能，用户需要取消注释以下行@synapse.properties文件，该文件在ESB_HOME/lib/core/WEB_INF/classes文件夹中。
    </p>
    <p>
        <strong>
            synapse.wsdl.resolver=org.wso2.carbon.mediation.initializer.RegistryWSDLLocator
            <br/> synapse.schema.resolver=org.wso2.carbon.mediation.initializer.RegistryXmlSchemaURIResolver
        </strong>
    </p>

    <h3>
        <a name="wsdlbasedproxy">基于WSDL的代理</a>
    </h3>

    <p>
        此模板可用于从现有Web Service的WSDL创建代理服务。提取端点信息从远程托管的实际服务的WSDL。
    </p>

    <div class="image">
        <img alt="基于WSDL的代理" src="images/wsdlbased-proxy.jpeg" />
        <p>图 4: 基于WSDL的代理模板</p>
    </div>

    <h4> 参数 </h4>

    <ul>
        <li>代理服务设置 : 用户应提供代理名称和端点URL。选择端点可以作为直接端点或注册表项。</li>
        <li>WSDL 选项 : 如果用户想要发布实际的后端服务WSDL/自定义WSDL，他可以提供WSDL条目注册表项或URL或内联wsdl选项。如果用户没有提供WSDL选项，则在用户请求?WSDL时将发布默认WSDL。 </li>
        <li>传输设置 : 可以在此处指定代理服务传输选项。</li>
    </ul>

    <p>
        <strong>注意: </strong>如果用户使用助力注册表配置ESB并且上传了全部服务的文件构成的*.gar 文件, 他只需要在“WSDl选项”下提供基本WSDL。无需将所有必需的导入模式作为WSDL资源提供，因为ESB只能使用基本WSDL来解析导入的资源。
        请注意，对于上述功能，用户需要取消注释以下行@synapse.properties文件，该文件在ESB_HOME/lib/core/WEB_INF/classes文件夹中。
    </p>
    <p>
        <strong>
            synapse.wsdl.resolver=org.wso2.carbon.mediation.initializer.RegistryWSDLLocator
            <br/> synapse.schema.resolver=org.wso2.carbon.mediation.initializer.RegistryXmlSchemaURIResolver
        </strong>
    </p>

    <h3>
        <a name="logproxy">日志代理</a>
    </h3>

    <p>
        此模板可用于创建代理服务，该服务记录所有传入请求并将其转发到给定端点。如果必要，可以在将它们路由到客户端之前记录从后端服务返回的响应。
    </p>

    <div class="image">
        <img alt="secure proxy" src="images/logging-proxy.jpeg" />
        <p>图 5:日志代理模板</p>
    </div>

    <h4> 参数 </h4>

    <ul>
        <li>代理服务设置 : 用户应提供代理名称和端点URL。选择端点可以作为直接端点或注册表项。</li>
        <li>WSDL 选项 : 如果用户想要发布实际的后端服务WSDL/自定义WSDL，他可以提供WSDL条目注册表项或URL或内联wsdl选项。如果用户没有提供WSDL选项，则在用户请求?WSDL时将发布默认WSDL。 </li>
        <li>传输设置 : 可以在此处指定代理服务传输选项。</li>
    </ul>

    <p>
        <strong>注意: </strong>如果用户使用助力注册表配置ESB并且上传了全部服务的文件构成的*.gar 文件, 他只需要在“WSDl选项”下提供基本WSDL。无需将所有必需的导入模式作为WSDL资源提供，因为ESB只能使用基本WSDL来解析导入的资源。
        请注意，对于上述功能，用户需要取消注释以下行@synapse.properties文件，该文件在ESB_HOME/lib/core/WEB_INF/classes文件夹中。
    </p>
    <p>
        <strong>
            synapse.wsdl.resolver=org.wso2.carbon.mediation.initializer.RegistryWSDLLocator
            <br/> synapse.schema.resolver=org.wso2.carbon.mediation.initializer.RegistryXmlSchemaURIResolver
        </strong>
    </p>

    <h3>
        <a name="transformerproxy">转换代理</a>
    </h3>

    <p>
        此模板可用于创建代理服务，其中用户尝试实现通过不同方案（消息格式）公开现有服务的需求，您可以使用
        <strong> 转换代理 </strong>选项轻松设置代理服务，该服务可以根据指定的XSLT配置转换请求和响应。
    </p>

    <div class="image">
        <img alt="secure proxy" src="images/transformer-proxy.jpeg" />
        <p>图 6:转换代理模板</p>
    </div>

    <h4> 参数 </h4>

    <ul>
        <li>代理服务设置 : 用户应提供代理名称和端点URL。选择端点可以作为直接端点或注册表项。</li>
        <li>WSDL 选项 : 如果用户想要发布实际的后端服务WSDL/自定义WSDL，他可以提供WSDL条目注册表项或URL或内联wsdl选项。如果用户没有提供WSDL选项，则在用户请求?WSDL时将发布默认WSDL。 </li>
        <li>传输设置 : 可以在此处指定代理服务传输选项。</li>
    </ul>
    <p>
        <strong>注意: </strong>如果用户使用助力注册表配置ESB并且上传了全部服务的文件构成的*.gar 文件, 他只需要在“WSDl选项”下提供基本WSDL。无需将所有必需的导入模式作为WSDL资源提供，因为ESB只能使用基本WSDL来解析导入的资源。
        请注意，对于上述功能，用户需要取消注释以下行@synapse.properties文件，该文件在ESB_HOME/lib/core/WEB_INF/classes文件夹中。
    </p>
    <p>
        <strong>
            synapse.wsdl.resolver=org.wso2.carbon.mediation.initializer.RegistryWSDLLocator
            <br/> synapse.schema.resolver=org.wso2.carbon.mediation.initializer.RegistryXmlSchemaURIResolver
        </strong>
    </p>

</body>

</html>